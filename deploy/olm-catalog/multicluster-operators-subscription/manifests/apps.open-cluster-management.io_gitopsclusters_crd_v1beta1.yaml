---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.1
  name: gitopsclusters.apps.open-cluster-management.io
spec:
  group: apps.open-cluster-management.io
  names:
    kind: GitOpsCluster
    listKind: GitOpsClusterList
    plural: gitopsclusters
    singular: gitopscluster
  scope: Namespaced
  versions:
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: The GitOpsCluster uses placement to import selected managed clusters
          into the Argo CD.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: GitOpsClusterSpec defines the desired state of GitOpsCluster.
            properties:
              argoServer:
                description: ArgoServerSpec specifies the location of the Argo CD
                  server.
                properties:
                  argoNamespace:
                    description: ArgoNamespace is the namespace in which the Argo
                      CD server is installed.
                    type: string
                  cluster:
                    description: Not used and reserved for defining a managed cluster
                      name.
                    type: string
                required:
                - argoNamespace
                type: object
              createBlankClusterSecrets:
                description: Internally used.
                type: boolean
              createPolicyTemplate:
                description: Create default policy template if it is true.
                type: boolean
              gitopsAddon:
                description: GitOpsAddon defines the configuration for the GitOps
                  addon.
                properties:
                  argoCDAgent:
                    description: ArgoCDAgent defines the configuration for the ArgoCD
                      agent.
                    properties:
                      enabled:
                        default: false
                        description: Enabled indicates whether the ArgoCD agent is
                          enabled. Default is false.
                        type: boolean
                      image:
                        description: Image specifies the ArgoCD agent container image.
                          Default is empty.
                        type: string
                      mode:
                        description: Mode specifies the ArgoCD agent mode. Default
                          is empty.
                        type: string
                      propagateHubCA:
                        default: true
                        description: PropagateHubCA indicates whether to propagate
                          the hub CA certificate to managed clusters via ManifestWork.
                          Default is true.
                        type: boolean
                      serverAddress:
                        description: ServerAddress specifies the ArgoCD server address
                          for the agent. Default is empty.
                        type: string
                      serverPort:
                        description: ServerPort specifies the ArgoCD server port for
                          the agent. Default is empty.
                        type: string
                    type: object
                  enabled:
                    default: false
                    description: |-
                      Enabled indicates whether the GitOps addon is enabled. Default is false.
                      When enabled, creates AddonDeploymentConfigs/ManagedClusterAddon resources.
                    type: boolean
                  gitOpsImage:
                    description: GitOpsImage specifies the GitOps (ArgoCD) container
                      image. Default is empty.
                    type: string
                  gitOpsNamespace:
                    description: GitOpsNamespace specifies the GitOps namespace. Default
                      is empty.
                    type: string
                  gitOpsOperatorImage:
                    description: GitOpsOperatorImage specifies the GitOps operator
                      container image. Default is empty.
                    type: string
                  gitOpsOperatorNamespace:
                    description: GitOpsOperatorNamespace specifies the GitOps operator
                      namespace. Default is empty.
                    type: string
                  olmSubscription:
                    description: |-
                      OLMSubscription defines the configuration for deploying the full OLM-managed
                      OpenShift GitOps operator instead of the lightweight helm-based deployment.
                      This is only supported on OpenShift ManagedClusters with OLM installed.
                      When enabled, this takes precedence over the helm-based deployment.
                      Requires gitopsAddon.enabled to be true.
                    properties:
                      channel:
                        description: Channel is the OLM channel. Default is "stable".
                        type: string
                      enabled:
                        default: false
                        description: |-
                          Enabled indicates whether to deploy via OLM Subscription. Default is false.
                          When enabled, the full OLM-managed OpenShift GitOps operator is deployed
                          instead of the lightweight helm-based operator.
                        type: boolean
                      installPlanApproval:
                        description: |-
                          InstallPlanApproval determines if InstallPlans should be automatically approved.
                          Default is "Automatic".
                        enum:
                        - Automatic
                        - Manual
                        type: string
                      name:
                        description: Name is the name of the Subscription. Default
                          is "openshift-gitops-operator".
                        type: string
                      namespace:
                        description: Namespace is the namespace for the Subscription.
                          Default is "openshift-operators".
                        type: string
                      source:
                        description: Source is the CatalogSource name. Default is
                          "redhat-operators".
                        type: string
                      sourceNamespace:
                        description: SourceNamespace is the CatalogSource namespace.
                          Default is "openshift-marketplace".
                        type: string
                    type: object
                  overrideExistingConfigs:
                    default: false
                    description: |-
                      OverrideExistingConfigs indicates whether to override existing configuration values in AddOnDeploymentConfig.
                      When false (default), existing config values are preserved and only new ones are added.
                      When true, config values from GitOpsCluster spec will override existing values.
                    type: boolean
                  reconcileScope:
                    description: ReconcileScope specifies the reconcile scope for
                      the GitOps operator. Default is empty.
                    type: string
                  redisImage:
                    description: RedisImage specifies the Redis container image. Default
                      is empty.
                    type: string
                type: object
              managedServiceAccountRef:
                description: ManagedServiceAccountRef defines managed service account
                  in the managed cluster namespace used to create the ArgoCD cluster
                  secret.
                type: string
              placementRef:
                description: ObjectReference contains enough information to let you
                  inspect or modify the referred object.
                properties:
                  apiVersion:
                    description: API version of the referent.
                    type: string
                  fieldPath:
                    description: |-
                      If referring to a piece of an object instead of an entire object, this string
                      should contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2].
                      For example, if the object reference is to a container within a pod, this would take on a value like:
                      "spec.containers{name}" (where "name" refers to the name of the container that triggered
                      the event) or if no container name is specified "spec.containers[2]" (container with
                      index 2 in this pod). This syntax is chosen only to have some well-defined way of
                      referencing a part of an object.
                    type: string
                  kind:
                    description: |-
                      Kind of the referent.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  name:
                    description: |-
                      Name of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                  namespace:
                    description: |-
                      Namespace of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/
                    type: string
                  resourceVersion:
                    description: |-
                      Specific resourceVersion to which this reference is made, if any.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency
                    type: string
                  uid:
                    description: |-
                      UID of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids
                    type: string
                type: object
                x-kubernetes-map-type: atomic
            required:
            - argoServer
            - placementRef
            type: object
          status:
            description: GitOpsClusterStatus defines the observed state of GitOpsCluster.
            properties:
              conditions:
                description: Conditions represent the latest available observations
                  of the GitOpsCluster's current state.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              lastUpdateTime:
                description: LastUpdateTime provides the last updated timestamp of
                  the gitOpsCluster status
                format: date-time
                type: string
              message:
                description: Message provides the detailed message of the GitOpsCluster
                  status.
                type: string
              phase:
                description: |-
                  Phase provides the overall phase of the GitOpsCluster status. Valid values include failed or successful.
                  This field is kept for backward compatibility. For detailed status information, use the Conditions field.
                type: string
            type: object
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
